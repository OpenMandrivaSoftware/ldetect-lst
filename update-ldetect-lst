#!/usr/bin/perl

my $dir = '/usr/share/ldetect-lst';
my @files = qw(pcitable usbtable isatable pcmciatable);

unlink "$dir/$_" foreach @files;

$ARGV[0] eq '--clean' and exit 0;

foreach (@files) {
    my $d = "$dir/$_.d";
    -d $d or next;
    my @l = sort glob("$d/*.lst") or next;
    system("cat " . join(" ", @l) . " > $dir/$_");
}
